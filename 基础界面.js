function 渲染游戏界面(y){"游戏中"==游戏状态&&(djqy([0,0,1600,900],y,1,()=>{tjdh("鼠标点击",.5,!0,5,{x:(djx-y.x)/y.s,y:(djy-y.y)/y.s})}),基础游戏界面(y),游戏动画渲染(y),jsdh("鼠标点击",(h,t)=>{ht(图片.鼠标点击[~~(h*(图片.鼠标点击.length-1))],t.x-32,t.y-46,64,64,2,1,0,y)}))}function 基础游戏界面(c){ht(图片.对战背景,0,0,1600,900,2,1,0,c),对战信息.我方回合||hf(rgb(255,0,0,.1),0,0,1600,900,!1,!1,!1,0,c),hx("#968870",100,350,1500,350,3,!1,void 0,!1,c);{let f=30,a=对战信息.敌方.场面.length,s=Math.min(.618*敌方随从区域.h,敌方随从区域.w/7);for(let h=0;h<a;h++){var t=敌方随从区域.x+(敌方随从区域.w-a*s-(a-1)*f)/2+h*(s+f),y=对战信息.敌方.场面[h];y.移动中||(可以操作()&&0<y.当前血量&&对战信息.我方.操作随从&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,t,敌方随从区域.y+.1*敌方随从区域.h,s,.8*敌方随从区域.h)&&hyf("#f88f8f",t+.06*s,敌方随从区域.y+.06*敌方随从区域.h,.88*s,.88*敌方随从区域.h,6,"#c34747",12,!1,0,c),绘制卡牌(y,t,敌方随从区域.y+.1*敌方随从区域.h,s,.8*敌方随从区域.h,c,!0,!1,!0),对战信息.我方.操作随从)||对战信息.我方.操作卡牌||!pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,t,敌方随从区域.y+.1*敌方随从区域.h,s,.8*敌方随从区域.h)||绘制卡牌(y,800<t+s?t+s:t-1.5*s,敌方随从区域.y+.5*敌方随从区域.h-.8*敌方随从区域.h*1.5/2,1.5*s,.8*敌方随从区域.h*1.5,c,!0,!0,!0)}var e=对战信息.我方.场面.length;for(let h=0;h<e;h++){let y=我方随从区域.x+(我方随从区域.w-e*s-(e-1)*f)/2+h*(s+f),x=对战信息.我方.场面[h];对战信息.我方回合&&0<x.攻击次数&&0<x.当前攻击&&0<x.当前血量&&(x.移动中||(可以操作()?hyf("#cbf88f",y+.06*s,我方随从区域.y+.06*我方随从区域.h,.88*s,.88*我方随从区域.h,6,"#6ac347",12,!1,0,c):hyf("#f8e08f",y+.06*s,我方随从区域.y+.06*我方随从区域.h,.88*s,.88*我方随从区域.h,6,"#c3aa47",12,!1,0,c)),!对战信息.我方.操作随从)&&可以操作()&&djqy([y,我方随从区域.y+.1*我方随从区域.h,s,.8*我方随从区域.h],c,2,(h,t)=>{对战信息.我方.操作随从=x,对战信息.我方.操作随从.拖拽坐标={x:h,y:t},对战信息.我方.操作随从.中心坐标={x:y+s/2,y:我方随从区域.y+.5*我方随从区域.h}},!1,!1,()=>{let t=!1;for(let h=0;h<a;h++){var y=对战信息.敌方.场面[h];if(y){var e=敌方随从区域.x+(敌方随从区域.w-a*s-(a-1)*f)/2+h*(s+f);if(0<y.当前血量&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,e,敌方随从区域.y+.1*敌方随从区域.h,s,.8*敌方随从区域.h)){t=!0,随从攻击(x,y);break}}}var h=敌方头像区域.x+(敌方头像区域.w-敌方头像区域.h)/2;pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,h,敌方头像区域.y,敌方头像区域.h,敌方头像区域.h)&&(t=!0,随从攻击(x,对战信息.敌方)),t||(对战信息.我方.操作随从=!1)}),x.移动中||绘制卡牌(x,y,我方随从区域.y+.1*我方随从区域.h,s,.8*我方随从区域.h,c)}for(let h=0;h<a;h++){var x=敌方随从区域.x+(敌方随从区域.w-a*s-(a-1)*f)/2+h*(s+f),n=对战信息.敌方.场面[h];n.移动中||对战信息.我方.操作随从||对战信息.我方.操作卡牌||!pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,x,敌方随从区域.y+.1*敌方随从区域.h,s,.8*敌方随从区域.h)||绘制卡牌(n,800<x+s?x+s:x-1.5*s,敌方随从区域.y+.5*敌方随从区域.h-.8*敌方随从区域.h*1.5/2,1.5*s,.8*敌方随从区域.h*1.5,c,!0,!0,!0)}for(let h=0;h<e;h++){var l=我方随从区域.x+(我方随从区域.w-e*s-(e-1)*f)/2+h*(s+f),r=对战信息.我方.场面[h];r.移动中||对战信息.我方.操作随从||对战信息.我方.操作卡牌||!pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,l,我方随从区域.y+.1*我方随从区域.h,s,.8*我方随从区域.h)||绘制卡牌(r,800<l+s?l+s:l-1.5*s,我方随从区域.y+.5*我方随从区域.h-.8*我方随从区域.h*1.5/2,1.5*s,.8*我方随从区域.h*1.5,c,!0,!0)}}var h,f,a,s=敌方头像区域.x+(敌方头像区域.w-敌方头像区域.h)/2;ht(图片.敌方头像,s,敌方头像区域.y,敌方头像区域.h,敌方头像区域.h,2,1,0,c,!1,!1,!1,1.5),ht(图片.血量图标,s+.7*敌方头像区域.h,敌方头像区域.y+.7*敌方头像区域.h,.3*敌方头像区域.h,.3*敌方头像区域.h,2,1,0,c,!1,!1,!1,2.5),中心画字(对战信息.敌方.当前血量<对战信息.敌方.血量上限?1:30<对战信息.敌方.血量上限?2:7,对战信息.敌方.当前血量,s+.7*敌方头像区域.h,敌方头像区域.y+.7*敌方头像区域.h,.3*敌方头像区域.h,.3*敌方头像区域.h,c,!0,.3*敌方头像区域.h),0<对战信息.敌方.当前攻击&&(ht(图片.攻击图标,s,敌方头像区域.y+.7*敌方头像区域.h,.3*敌方头像区域.h,.3*敌方头像区域.h,2,1,0,c,!1,!1,!1,2.5),中心画字(7,对战信息.敌方.当前攻击,s,敌方头像区域.y+.7*敌方头像区域.h,.3*敌方头像区域.h,.3*敌方头像区域.h,c,!0,.3*敌方头像区域.h)),ht(图片.水晶,敌方头像区域.x+敌方头像区域.w-150,敌方头像区域.y,50,50,2,1,0,c),txan(对战信息.敌方.水晶+"/"+对战信息.敌方.水晶上限,3,!1,敌方头像区域.x+敌方头像区域.w-100,敌方头像区域.y,100,50,c),对战信息.我方.操作随从&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,s,敌方头像区域.y,敌方头像区域.h,敌方头像区域.h)&&可以操作()&&0<对战信息.敌方.当前血量&&(h=图片.攻击英雄标记,f=+maxfps,ht(h[~~(gamesjx%f/f*(h.length-1))],s,敌方头像区域.y,敌方头像区域.h,敌方头像区域.h,2,1,0,c,!1,!1,!1,4)),ht(图片.我方头像,我方头像区域.x+(我方头像区域.w-我方头像区域.h)/2,我方头像区域.y,我方头像区域.h,我方头像区域.h,2,1,0,c,!1,!1,!1,1.5),ht(图片.血量图标,s+.7*我方头像区域.h,我方头像区域.y+.7*我方头像区域.h,.3*我方头像区域.h,.3*我方头像区域.h,2,1,0,c,!1,!1,!1,2.5),中心画字(对战信息.我方.当前血量<对战信息.我方.血量上限?1:30<对战信息.我方.血量上限?2:7,对战信息.我方.当前血量,s+.7*我方头像区域.h,我方头像区域.y+.7*我方头像区域.h,.3*我方头像区域.h,.3*我方头像区域.h,c,!0,.3*我方头像区域.h),0<对战信息.我方.当前攻击&&(ht(图片.攻击图标,s,我方头像区域.y+.7*我方头像区域.h,.3*我方头像区域.h,.3*我方头像区域.h,2,1,0,c,!1,!1,!1,2.5),中心画字(7,对战信息.我方.当前攻击,s,我方头像区域.y+.7*我方头像区域.h,.3*我方头像区域.h,.3*我方头像区域.h,c,!0,.3*我方头像区域.h)),ht(图片.水晶,我方头像区域.x+我方头像区域.w-150,我方头像区域.y+50,50,50,2,1,0,c),txan(对战信息.我方.水晶+"/"+对战信息.我方.水晶上限,3,!1,我方头像区域.x+我方头像区域.w-100,我方头像区域.y+50,100,50,c);{let t=0,y=对战信息.敌方.手牌.length,e=Math.min(.618*敌方手牌区域.h,敌方手牌区域.w/对战信息.敌方.手牌上限);for(let h=0;h<y;h++){var i=敌方手牌区域.x+(敌方手牌区域.w-y*e-(y-1)*t)/2+h*(e+t);绘制卡牌(对战信息.敌方.手牌[h],i,敌方手牌区域.y,e,敌方手牌区域.h,c,!1)}中心画字(1,"手牌: "+对战信息.敌方.手牌.length,敌方手牌区域.x,敌方手牌区域.y,敌方手牌区域.w,敌方手牌区域.h,c,!1,.618*敌方手牌区域.h),t=20;let h=对战信息.我方.手牌.length,b=Math.min(.618*我方手牌区域.h,我方手牌区域.w/对战信息.我方.手牌上限);for(let v=0;v<h;v++){let g=我方手牌区域.x+(我方手牌区域.w-h*b-(h-1)*t)/2+v*(b+t),o=对战信息.我方.手牌[v];对战信息.我方回合&&o.当前费用<=对战信息.我方.水晶&&对战信息.我方.场面.length<7?可以操作()?(对战信息.我方.操作卡牌&&对战信息.我方.操作卡牌.id==o.id||(a=pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,g,我方手牌区域.y-20,b,我方手牌区域.h+20),绘制卡牌(o,g,我方手牌区域.y-(a?20:0),b,我方手牌区域.h,c)),对战信息.我方.操作卡牌&&对战信息.我方.操作卡牌.id==o.id&&返回卡牌效果(o).指向&&(hyf("#abe9fd",g,我方手牌区域.y-10,b,我方手牌区域.h-20,6,"#abe9fd",void 0,6,0,c),绘制卡牌(o,g,我方手牌区域.y-20,b,我方手牌区域.h,c)),对战信息.我方.操作卡牌||djqy([g,我方手牌区域.y-20,b,我方手牌区域.h],c,2,(h,t)=>{对战信息.我方.操作卡牌=o,对战信息.我方.操作卡牌.拖拽坐标={x:h,y:t},对战信息.我方.操作卡牌.手牌中心坐标={x:g+b/2,y:我方手牌区域.y+我方手牌区域.h/2}},!1,!1,()=>{if("随从"==o.类型)if(pzff(我方随从区域.x,我方随从区域.y,我方随从区域.w,我方随从区域.h,(djx-c.x)/c.s,(djy-c.y)/c.s,1,1)){var y=对战信息.我方.场面.length;if(0<y){var e=Math.min(.618*我方随从区域.h,我方随从区域.w/7);let t=0;for(let h=0;h<y;h++){var x=我方随从区域.x+(我方随从区域.w-y*e-30*(y-1))/2+h*(e+30);(djx-c.x)/c.s>=x+e/2&&(t=h+1)}使用卡牌(o,对战信息.我方,t,v)}else 使用卡牌(o,对战信息.我方,0,v)}else 对战信息.我方.操作卡牌=!1;var h=返回卡牌效果(o);if("法术"!=o.类型||h.指向||(pzff(我方随从区域.x,敌方随从区域.y,我方随从区域.w,敌方随从区域.h+我方随从区域.h,(djx-c.x)/c.s,(djy-c.y)/c.s,1,1)?使用卡牌(o,对战信息.我方,-1,v):对战信息.我方.操作卡牌=!1),"法术"==o.类型&&h.指向){let t=!1;if("指向敌方"==h.指向){var f=对战信息.敌方.场面.length,a=敌方随从区域,s=Math.min(.618*a.h,a.w/7);for(let h=0;h<f;h++){var n=对战信息.敌方.场面[h];if(n){var l=a.x+(a.w-f*s-30*(f-1))/2+h*(s+30);if(0<n.当前血量&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,l,a.y+.1*a.h,s,.8*a.h)){t=!0,使用卡牌(o,对战信息.我方,n,v,{x:g+b/2,y:我方手牌区域.y-20+我方手牌区域.h/2});break}}}}else{var r=对战信息.我方.场面.length,i=我方随从区域,d=Math.min(.618*i.h,i.w/7);for(let h=0;h<r;h++){var j=对战信息.我方.场面[h];if(j){var w=i.x+(i.w-r*d-30*(r-1))/2+h*(d+30);if(0<j.当前血量&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,w,i.y+.1*i.h,d,.8*i.h)){t=!0,使用卡牌(o,对战信息.我方,j,v,{x:g+b/2,y:我方手牌区域.y-20+我方手牌区域.h/2});break}}}}t||(对战信息.我方.操作卡牌=!1)}})):(绘制卡牌(o,g,我方手牌区域.y,b,我方手牌区域.h,c),hyf(rgb(96,255,96,.5),g-7,我方手牌区域.y+10,b+14,我方手牌区域.h-10,12,!1,!1,!1,0,c)):(绘制卡牌(o,g,我方手牌区域.y,b,我方手牌区域.h,c),hyf(rgb(0,0,0,.5),g-7,我方手牌区域.y+10,b+14,我方手牌区域.h-10,12,!1,!1,!1,0,c))}}if(ht(图片.卡背,1600-.618*敌方头像区域.h,敌方头像区域.y,.618*敌方头像区域.h,敌方头像区域.h,3,1,0,c),中心画字(1,"牌库"+对战信息.敌方.牌组.length,1600-.618*敌方头像区域.h,敌方头像区域.y,.618*敌方头像区域.h,敌方头像区域.h,c),ht(图片.卡背,1600-.618*我方头像区域.h,我方头像区域.y,.618*我方头像区域.h,我方头像区域.h,3,1,0,c),中心画字("#abe9fd","牌库"+对战信息.我方.牌组.length,1600-.618*我方头像区域.h,我方头像区域.y,.618*我方头像区域.h,我方头像区域.h,c),txan(对战信息.我方回合?"结束回合":"对手回合",对战信息.我方回合?可以操作()?"#abe9fd":"#959595":1,!1,1500,325,100,50,c,()=>{对战信息.我方回合&&可以操作()&&回合交替()}),对战信息.游戏胜负&&(hf(rgb(0,0,0,.618),0,0,1600,900,!1,!1,!1,0,c),ht("赢"==对战信息.游戏胜负?图片.胜利:图片.失败,0,0,1600,900,2,1,0,c),txan("赢"==对战信息.游戏胜负?"乘胜追击":"越挫越勇","#abe9fd",!1,600,730,400,150,c,()=>{对局初始化()})),对战信息.我方.操作卡牌&&可以操作()){var d=对战信息.我方.操作卡牌,j=Math.min(.618*我方手牌区域.h,我方手牌区域.w/对战信息.我方.手牌上限);if("随从"==d.类型){if(pzff(我方随从区域.x,我方随从区域.y,我方随从区域.w,我方随从区域.h,(djx-c.x)/c.s,(djy-c.y)/c.s,1,1)){hyf(gbystmd("#abe9fd",.382),我方随从区域.x,我方随从区域.y,我方随从区域.w,我方随从区域.h,16,"#abe9fd",void 0,!1,0,c);var w=对战信息.我方.场面.length;if(0<w){var g=Math.min(.618*我方随从区域.h,我方随从区域.w/7);let t=0;for(let h=0;h<w;h++){var o=我方随从区域.x+(我方随从区域.w-w*g-30*(w-1))/2+h*(g+30);0==h&&(t=o-15),(djx-c.x)/c.s>=o+g/2&&(t=o+g+15)}hx(7,t,我方随从区域.y,t,我方随从区域.y+我方随从区域.h,5,2,5,!1,c)}}绘制卡牌(d,d.拖拽坐标.x,d.拖拽坐标.y,j,我方手牌区域.h,c)}var v=返回卡牌效果(d);if("法术"!=d.类型||v.指向||(pzff(我方随从区域.x,敌方随从区域.y,我方随从区域.w,敌方随从区域.h+我方随从区域.h,(djx-c.x)/c.s,(djy-c.y)/c.s,1,1)&&hyf(gbystmd("#abe9fd",.382),我方随从区域.x,敌方随从区域.y,我方随从区域.w,敌方随从区域.h+我方随从区域.h,16,"#abe9fd",void 0,!1,0,c),绘制卡牌(d,d.拖拽坐标.x,d.拖拽坐标.y,j,我方手牌区域.h,c)),"法术"==d.类型&&v.指向){var b=(djx-c.x)/c.s,m=(djy-c.y)/c.s,p=[];for(let h=0;h<3;h++){var F=yinshe(h,0,2,d.手牌中心坐标.x,b),G=yinshe(h,0,2,d.手牌中心坐标.y,m),H=h<1.5?yinshe(h,0,1.5,0,-200):yinshe(h,1.5,2,-200,0);p.push(三D投影(F,G,H))}if("指向敌方"==v.指向?hqx(txys.cw,p,6,1,6,c):hqx("#abe9fd",p,6,"#abe9fd",6,c),对战信息.我方.操作卡牌&&可以操作())if("指向敌方"==返回卡牌效果(对战信息.我方.操作卡牌).指向){var u=对战信息.敌方.场面.length,z=敌方随从区域,M=Math.min(.618*z.h,z.w/7);for(let h=0;h<u;h++){var k=z.x+(z.w-u*M-30*(u-1))/2+h*(M+30);if(0<对战信息.敌方.场面[h].当前血量&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,k,z.y+.1*z.h,M,.8*z.h)){var q=图片.攻击标记,B=+maxfps;ht(q[~~(gamesjx%B/B*(q.length-1))],k,z.y+.1*z.h,M,.8*z.h,2,1,0,c,!1,!1,!1,1.5);break}}}else{var R=对战信息.我方.场面.length,D=我方随从区域,T=Math.min(.618*D.h,D.w/7);for(let h=0;h<R;h++){var A=D.x+(D.w-R*T-30*(R-1))/2+h*(T+30);if(0<对战信息.我方.场面[h].当前血量&&pzff((djx-c.x)/c.s,(djy-c.y)/c.s,1,1,A,D.y+.1*D.h,T,.8*D.h)){var C=图片.选择强化动画,_=+maxfps;ht(C[~~(gamesjx%_/_*(C.length-1))],A,D.y,T,D.h,2,1,0,c,!1,!1,!1,1.5);break}}}}}if(对战信息.我方.操作随从&&可以操作()){var S=对战信息.我方.操作随从,I=(Math.min(.618*我方随从区域.h,我方随从区域.w/7),(djx-c.x)/c.s),J=(djy-c.y)/c.s,E=[];for(let h=0;h<3;h++){var K=yinshe(h,0,2,S.中心坐标.x,I),L=yinshe(h,0,2,S.中心坐标.y,J),N=h<1.5?yinshe(h,0,1.5,0,-200):yinshe(h,1.5,2,-200,0);E.push(三D投影(K,L,N))}hqx(txys.cw,E,15,1,10,c);j=图片.攻击标记,v=+maxfps;ht(j[~~(gamesjx%v/v*(j.length-1))],(djx-c.x)/c.s-50,(djy-c.y)/c.s-50,100,100,2,1,0,c,!1,!1,!1,1.5)}}function 绘制卡牌(t,y,e,x,f,a,h=!0,s=!1,n=!1){if(1==t.id)ht(图片.我方头像,y,e,x,f,2,1,0,a,!1,!1,!1,1.5);else if(2==t.id)ht(图片.敌方头像,y,e,x,f,2,1,0,a,!1,!1,!1,1.5);else{o=y,l=e,r=x,i=f,d=.618,j=Math.min(r,i*d),d=Math.min(i,r/d);var l,r,i,d,j,w,g,o={x:o+=(r-j)/2,y:r=l+(i-d)/2,w:j,h:d};if(y=o.x,e=o.y,x=o.w,f=o.h,h){let h=0;switch(s?"卡牌":t.种类){case"收藏":ht(图片[t.名称],y+.03*x,e+.05*f,.94*x,.5*f,1,1,0,a),h=Math.min(kf(x*f*.35/t.描述.length/4.3),f/15),txwby(t.描述,v(t.品质),y,e+.6*f,x,h,.35*f,a,!0),ht("传说"==t.品质?图片.传说卡牌边框:图片.卡牌边框,y,e,x,f,3,1,0,a),ht(图片.水晶,y,e,.1*f,.1*f,2,1,0,a,!1,!1,!1,1.5),中心画字(7,t.费用,y,e,.1*f,.1*f,a,!0,.1*f),txan(t.名称,v(t.品质),!1,y,e+.5*f,x,.1*f,a),"无"!=t.品质&&(g=.76*(w=.1*f),ht(图片[t.品质+"宝石"],y+x/2-g/2,e+.575*f,g,w,2,1,0,a)),"法术"!=t.类型&&(ht(图片.攻击图标,y,e+.9*f,.1*f,.1*f,2,1,0,a,!1,!1,!1,2.5),中心画字(7,t.攻击,y,e+.9*f,.1*f,.1*f,a,!0,.1*f),ht(图片.血量图标,y+x-.1*f,e+.9*f,.1*f,.1*f,2,1,0,a,!1,!1,!1,2.5),中心画字(7,t.血量,y+x-.1*f,e+.9*f,.1*f,.1*f,a,!0,.1*f),0<t.种族.length)&&txan(t.种族,8,!1,y+x/2-.1*f,e+.9*f,.1*f*2,.1*f,a),"法术"==t.类型&&txan("法术",6,!1,y+x/2-.1*f,e+.9*f,.1*f*2,.1*f,a);break;case"卡牌":ht(图片[t.名称],y+.03*x,e+.05*f,.94*x,.5*f,1,1,0,a),h=Math.min(kf(x*f*.35/t.描述.length/4.3),f/15),txwby(t.描述,v(t.品质),y,e+.6*f,x,h,.35*f,a,!0),ht("传说"==t.品质?图片.传说卡牌边框:n?图片.卡牌边框_敌:图片.卡牌边框,y,e,x,f,3,1,0,a),ht(图片.水晶,y,e,.1*f,.1*f,2,1,0,a,!1,!1,!1,1.5),中心画字(t.当前费用>t.费用?1:t.当前费用<t.费用?2:7,t.当前费用,y,e,.1*f,.1*f,a,!0,.1*f),txan(t.名称,v(t.品质),!1,y,e+.5*f,x,.1*f,a),"无"!=t.品质&&(w=.76*(g=.1*f),ht(图片[t.品质+"宝石"],y+x/2-w/2,e+.575*f,w,g,2,1,0,a)),"法术"!=t.类型&&(ht(图片.攻击图标,y,e+.9*f,.1*f,.1*f,2,1,0,a,!1,!1,!1,2.5),中心画字(t.当前攻击>t.攻击?2:t.当前攻击<t.攻击?1:7,t.当前攻击,y,e+.9*f,.1*f,.1*f,a,!0,.1*f),ht(图片.血量图标,y+x-.1*f,e+.9*f,.1*f,.1*f,2,1,0,a,!1,!1,!1,2.5),中心画字(t.当前血量<t.血量上限?1:t.血量上限>t.血量?2:7,t.当前血量,y+x-.1*f,e+.9*f,.1*f,.1*f,a,!0,.1*f),0<t.种族.length)&&txan(t.种族,8,!1,y+x/2-.1*f,e+.9*f,.1*f*2,.1*f,a),"法术"==t.类型&&txan("法术",6,!1,y+x/2-.1*f,e+.9*f,.1*f*2,.1*f,a);break;case"具象化":ht(图片[t.名称],y+.03*x,e+.05*f,.94*x,.9*f,1,1,0,a),t.当前血量<=0&&hf(rgb(0,0,0,.5),y+.03*x,e+.05*f,.94*x,.9*f,!1,!1,!1,0,a),ht(t.当前血量<=0?图片.死亡边框:"传说"==t.品质?图片.传说卡牌边框:n?图片.卡牌边框_敌:图片.卡牌边框,y,e,x,f,3,1,0,a),"法术"!=t.类型&&(检测卡牌效果(t,"风怒")&&(w=图片.风怒,g=+maxfps,ht(w[~~(gamesjx%g/g*(w.length-1))],y,e,x,f,2,1,0,a,!1,!1,!1,2)),检测卡牌效果(t,"被动")&&ht(图片.被动图标,y+(x-.2*f)/2,e+.8*f,.2*f,.2*f,2,1,0,a,!1,!1,!1,1.25),检测卡牌效果(t,"亡语")&&ht(图片.亡语图标,y+(x-.2*f)/2,e+.8*f,.2*f,.2*f,2,1,0,a,!1,!1,!1,1.25),检测卡牌效果(t,"吸血")&&ht(图片.吸血图标,y+(x-.2*f)/2,e+.8*f,.2*f,.2*f,2,1,0,a,!1,!1,!1,1.25),检测卡牌效果(t,"剧毒")&&ht(图片.剧毒图标,y+(x-.2*f)/2,e+.8*f,.2*f,.2*f,2,1,0,a,!1,!1,!1,1.5),ht(图片.攻击图标,y,e+.8*f,.2*f,.2*f,2,1,0,a,!1,!1,!1,2),中心画字(t.当前攻击>t.攻击?2:t.当前攻击<t.攻击?1:7,t.当前攻击,y,e+.8*f,.2*f,.2*f,a,!0,.2*f),ht(图片.血量图标,y+x-.2*f,e+.8*f,.2*f,.2*f,2,1,0,a,!1,!1,!1,2),中心画字(t.当前血量<t.血量上限?1:t.血量上限>t.血量?2:7,t.当前血量,y+x-.2*f,e+.8*f,.2*f,.2*f,a,!0,.2*f))}function v(h){return"无"==h?"#fff":"普通"==h?"#968870":"稀有"==h?"#213b6d":"史诗"==h?"#601a79":"传说"==h?"#8a571e":void 0}}else ht(图片.卡背,y,e,x,f,3,1,0,a)}}function 中心画字(h,t,y,e,x,f,a,s,n=!1){t+="";let l=Math.min(x/t.length,f);n&&(l=n),hz(h,t,y+x/2,e+f/2-l/2,l,!0,!1,!1,!1,a,txbjs(h),s)}function 三D投影(h,t,y){y=1e3/(1e3+y);return{x:800+(h-800)*y,y:450+(t-450)*y,fd:y}}function txwby(h="天无界,行无疆",j=7,t=0,y=0,e=300,x=14,f=!1,a=!1,w=!1,g=!0,o=!1,v=!1,b=!1,c=!1){h+="";var s,m=md5(h+"&"+j+"&"+e+"&"+x+"&"+f+"&"+a+"&"+w+"&"+g+"&"+o+"&"+v+"&"+b),p=txwbylist[m];if(p)return s=f||p.height/Retina/(a?a.s:1),ht(p,t,y,e,s,2,1,0,a),s;{txwbylist[m]=-1,f&&"auto"==x&&(p=1.5*h.length-4,t=2*(e+f),x=(kf(t*t-4*p*(-e*f))-t)/2/p/1.1),e/4<(x="auto"!=x||f?x:14)&&(x=Math.round(e/4)),f&&f<3*x&&(f=3*x);let s=e,n=x,l=(a&&(s*=a.s,n*=a.s,f)&&(f*=a.s),s-2*n),r=h.split("/n");v?(ctx.shadowColor=kjys(j),ctx.shadowBlur=.382*n):ctx.shadowBlur=0,ctx.textAlign=w?"center":"left",ctx.textBaseline="top",ctx.font=n+"px"+canvaszt;for(let y=0;y<r.length;y++){var u=r[y],z=ctx.measureText(u).width;if(z>l){let h=Math.round(l/z*u.length),t=u.substr(0,h);for(;ctx.measureText(t).width>l;)h--,t=u.substr(0,h);z=u.substring(h);r[y]=u.substr(0,h),r.splice(y+1,0,z),y=0}}let i=(3*r.length+3)*n/2,d=0;f&&(f>i&&(d=(f-i)/2),i=f);y=lpxr(s*Retina,i*Retina,()=>{ctx.scale(Retina,Retina);var h,t,y=b||txbjs(j);g?(h=syszh(kjys(y)),t=rgbzhsl(h.r,h.g,h.b),hyf(jbys(0,0,s,i,2,[hsl(t.h-.05,t.s,t.l-.1,h.a),y,hsl(t.h+.05,t.s,t.l+.1,h.a)],!0),0,0,s,i,n)):hyf(y,0,0,s,i,n),c&&hyf(kjys(j),1,1,s-2,i-2,n,!1,!1,2);let e=0;o&&(hf(j,.236*n,d+n,.382*n,i-2*(n+d),!!v&&j),e=.309*n),v?(ctx.shadowColor=kjys(j),ctx.shadowBlur=.382*n):ctx.shadowBlur=0,ctx.textAlign=w?"center":"left",ctx.textBaseline="top",ctx.font=n+"px"+canvaszt,ctx.fillStyle=kjys(j);for(let h=0;h<r.length;h++){var x=r[h],f=n+h*n*1.5+d,a=(w?s/2:n)+e;ctx.fillText(x,a,f,l)}});return txwbylist[m]=y,f||y.height/Retina/(a?a.s:1)}}